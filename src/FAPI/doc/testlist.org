#+TITLE:     Test List
#+AUTHOR:    K.
#+DATE:      2012-03-22 Thu
#+DESCRIPTION: CL API Convertor Test List
#+KEYWORDS:
#+LANGUAGE:  en


* Test Plan for FAPI Convergency Layer
** Source tree
   TurnerProject/FAPI_CL
   embunit/          - C unitary test framework
   Testing/          - Cl test cases
   PHY/fapi          - FAPI interface
   PHY/LTE/fapi_conv - API convertion
   T4K/FAPI_CL       - CL application

** Testin Request [4/4]
   DL data flow: FAPI -> utest -> API

   - [X] Extract DL API message from API trace
     Could be any of Init, RX/TX vectors
   - [X] Prepare FAPI MSG using as reference API trace
   - [X] Run Convergency Leyer DL message handler's
   - [X] Compare original API message with CL output

** Testin Respons and Indication [3/3]
   UL dataflow: FAPI <- utest <- API

   - [X] Prepare API UL message from API trace
   - [X] Run CL UL message handler
   - [X] Assert FAPI meesage content against original message

** Table 3: General L1 API message format
   d    FAPI_L1_PARAM_REQ       = 0x00, // See Section 3.2.1.1
   u    FAPI_L1_PARAM_RESP      = 0x01, // See Section 3.2.1.2
   d+   FAPI_L1_CONFIG_REQ      = 0x02, // See Section 3.2.2.1
   u    FAPI_L1_CONFIG_RESP     = 0x03, // See Section 3.2.2.2
   d+   FAPI_L1_START_REQ       = 0x04, // See Section 3.2.4.1
   d+   FAPI_L1_STOP_REQ        = 0x05, // See Section 3.2.5.1
   u    FAPI_L1_STOP_IND        = 0x06, // See Section 3.2.5.2
   d    FAPI_L1_UE_CONFIG_REQ   = 0x07, // See Section 3.2.6.1
   u    FAPI_L1_UE_CONFIG_RESP  = 0x08, // See Section 3.2.6.2
   u    FAPI_L1_ERROR_IND       = 0x09, // See Section 3.2.8.1
   d    FAPI_L1_UE_RELEASE_REQ  = 0x0a, // See Section 3.2.7.1
   u    FAPI_L1_UE_RELEASE_RESP = 0x0b, // See Section 3.2.7.2   
   d    FAPI_L1_DL_CONFIG_REQ   = 0x80, // See Section 3.3.1.2
   d    FAPI_L1_UL_CONFIG_REQ   = 0x81, // See Section 3.3.1.3
   u    FAPI_L1_SUBFRAME_IND    = 0x82, // See Section 3.3.1.1
   d    FAPI_L1_HI_DCI0_REQ     = 0x83, // See Section 3.3.1.4
   d    FAPI_L1_TX_REQ          = 0x84, // See Section 3.3.2.1
   u    FAPI_L1_HARQ_IND        = 0x85, // See Section 3.3.3.2
   u    FAPI_L1_CRC_IND         = 0x86, // See Section 3.3.3.3
   u    FAPI_L1_RX_ULSCH_IND    = 0x87, // See Section 3.3.3.1
   u    FAPI_L1_RACH_IND        = 0x88, // See Section 3.3.3.4
   u    FAPI_L1_SRS_IND         = 0x89, // See Section 3.3.3.7
   u    FAPI_L1_RX_SR_IND       = 0x8a, // See Section 3.3.3.4
   u    FAPI_L1_RX_CQI_IND      = 0x8b, // See Section 3.3.3.5
   
** Reference traces 
   1. Full duplex:
      1_7_2_fdx_abd05a89737f9b65d35a9f4857e62229e7b81a84.zip

   2. Network entry:
      1_7_2_ne_abd05a89737f9b65d35a9f4857e62229e7b81a84.zip

   1_7_2_ne/ccpu.log       
   1_7_2_ne/dlul.txt       - IQ samples MIMO 4port ANT
   1_7_2_ne/dump.api       - PHY API samples MIMO 4port ANT (ttbox)
   
   - frame structure
   (728, 6) -  UE -> PRACH preamble id 5. -> eNodeB (Msg1)
   (729, 3) -  UE <- RAR  <- eNodeB (Msg2)
   (729, 9) -  UE -> RRC Conection Request -> eNodeB (Msg4)
   (730, 7) -  UE <- RRC Conection Setup <- eNodeB (Msg5)
   
   (731, 1) -  UE -> PUCCH Ack -> eNodeB 
   (734, 2) -  UE -> PUCCH SR  -> eNodeB 
   (734, 7) -  UE <- DCI Format 0 <- eNodeB 
   
   (735, 1) -  UE  -> RRC Connection Setup Complete -> eNodeB (Msg6 == Attach complete)

   IQ Samples Format:
   | DL port 0 | DL port 1   | UL port 0   | UL port 1 (capture OFF) |
   | 23     96 | 59      434 | -160    608 | -20047  -20047          |
   |           |             |             |                         |

   * To make UL IQ sampless we need to cut/paste |UL port 0| leaving others 
   zeros.

*** WJ config to be open before importing:
    1_7_2_ne/mimo.def       
    1_7_2_ne/mimo.pfl       

    Converter:
    1_7_2_ne/mimobin2text.exe  

    MLOG for ttbox:
    1_7_2_ne/mlog.bin       


** Testcases
*** Configuration Messages
**** PHY CSAP messages [2/2]
     phy_state_testset.c
    - [X] FAPI_L1_CONFIG_REQ
    - [X] FAPI_L1_CONFIG_RESP

**** PHY CSAP Configuration Procedure [3/4]
     cphy_sap_test.c
     - [X] Initialization
     - [X] Termination
     - [X] Restart
     - [ ] Reset

*** UE management [3/3]
    ue_messages_test.c
     - [X] L1_UE_CONFIG
     - [X] L1_UE_CONFIG_PARAMETERS
     - [X] L1_UE_RELEASE

testL1_UE_CONFIG testL1_UE_CONFIG_PARAMETERS testL1_UE_RELEASE

*** Subframe Messages [0/4]
    subframe_messages_test.c
    - [ ]  FAPI_L1_SUBFRAME_IND
    - [ ]  FAPI_L1_DL_CONFIG_REQ
    - [ ]  FAPI_L1_UL_CONFIG_REQ
    - [ ]  FAPI_L1_HI_DCI0_REQ

*** Uplink Data [0/7]
    uplink_data_test
    - [ ]  FAPI_L1_RX_ULSCH_IND
    - [ ]  FAPI_L1_HARQ_IND
    - [ ]  FAPI_L1_CRC_IND
    - [ ]  FAPI_L1_RX_SR_IND
    - [ ]  FAPI_L1_RX_CQI_IND
    - [ ]  FAPI_L1_RACH_IND
    - [ ]  FAPI_L1_SRS_IND

*** Downlink Data [1/2]
    downlink_data_test
    - [X] FAPI_BCH
       Bitexact test with: out/NN_0018_PHY_TXSTART_REQ.bin

    - [ ] DownlinkDataERROR

